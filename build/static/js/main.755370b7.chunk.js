(this.webpackJsonpcontacttracing=this.webpackJsonpcontacttracing||[]).push([[0],{155:function(e,t,n){},196:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var s,c,a,r=n(1),i=n(39),o=n.n(i),d=(n(196),n(197),n(65)),l=(n(155),n(97)),j=n(28),b=n(37),h=n(293),u=n(182),O=n(92),x=n(58),p=n(291),m=n(294),g=n(181),f=n(91),v=n(296),y=Object(v.a)(s||(s=Object(f.a)(["\nmutation sendingPhone($phonenumber:String){\n    sendingPhone(phonenumber:$phonenumber){\n      success\n      message\n    }\n}\n"]))),I=Object(v.a)(c||(c=Object(f.a)(["\nmutation verifyCode($phonenumber:String,$code:String,$firstName:String,$lastName:String){\n    verifyCode(phonenumber:$phonenumber,code:$code,firstName:$firstName,lastName:$lastName){\n      success\n      message\n      id\n    }\n}\n"]))),S=Object(v.a)(a||(a=Object(f.a)(["\nmutation createTransaction($personalInfoId:ID!,$shopId:ID!){\n    createTransaction(personalInfoId:$personalInfoId,shopId:$shopId){\n        success\n        message\n    }\n}\n"]))),w=n(298),F=n(299),N=n(102),C=n(9);function z(e){var t=e.verifyCode,n=e.personalInfo,s=e.isMoble,c=e.loading,a=h.a.useForm(),r=Object(b.a)(a,1)[0];return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(O.a,{children:Object(C.jsx)(x.a,{xs:24,md:24,children:Object(C.jsx)(p.a,{style:{margin:"0 auto",width:s?"100%":"50%"},children:Object(C.jsx)(h.a,{form:r,name:"verifyCode",onFinish:function(e){t({variables:Object(d.a)(Object(d.a)({},n),{},{phonenumber:null===n||void 0===n?void 0:n.tel,code:e.code})})},onFinishFailed:function(e){console.log("Failed:",e)},style:{color:"#014283"},children:Object(C.jsxs)(O.a,{children:[Object(C.jsxs)(x.a,{xs:24,md:24,style:{textAlign:"center"},children:[Object(C.jsx)("h3",{className:"HeaderFont",children:"\u179f\u17bc\u1798\u1794\u1789\u17d2\u1785\u17bc\u179b\u179b\u17c1\u1781\u1780\u17bc\u178a\u178a\u17c2\u179b\u1799\u17be\u1784\u1794\u17b6\u1793\u1795\u17d2\u1789\u17be\u1791\u17c5\u1780\u17b6\u1793\u17cb\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791\u179a\u1794\u179f\u17cb\u17a2\u17d2\u1793\u1780"}),Object(C.jsx)("br",{})]}),Object(C.jsxs)(x.a,{xs:24,md:24,children:[Object(C.jsxs)("p",{style:{fontSize:18},children:[Object(C.jsx)(N.b,{}),"\u2003\u179b\u17c1\u1781\u1780\u17bc\u178a"]}),Object(C.jsx)(h.a.Item,{name:"code",rules:[{required:!0,message:"\u178f\u17d2\u179a\u17bc\u179c\u1794\u17c6\u1796\u17c1\u1789\u1794\u17d2\u179a\u17a2\u1794\u17cb\u1781\u17b6\u1784\u179b\u17be!"}],children:Object(C.jsx)(m.a,{placeholder:"\u179b\u17c1\u1781\u1780\u17bc\u178a",size:"large",style:{borderRadius:10}})}),Object(C.jsx)("p",{style:{fontSize:14,textAlign:"center"},children:"\u179b\u17c1\u1781\u1780\u17bc\u178a\u1793\u17b9\u1784\u1795\u17bb\u178f\u1780\u17c6\u178e\u178f\u17cb\u1780\u17d2\u1793\u17bb\u1784\u179a\u1799\u17c8\u1796\u17c1\u179b 30 \u179c\u17b7\u1793\u17b6\u1791\u17b8"})]}),Object(C.jsx)(x.a,{xs:24,md:24,children:Object(C.jsx)(h.a.Item,{children:Object(C.jsxs)(g.a,{htmlType:"submit",type:"primary",size:"large",style:{width:"100%",borderRadius:10},loading:c,children:["\u1794\u1793\u17d2\u178f\u2003",Object(C.jsx)(N.a,{})]})})})]})})})})})})}var $=n(150),R=n(176),E=n(105),H=n.n(E);function T(e){for(var t=H.a.parseZone(e).format("D").toString(),n=H.a.parseZone(e).format("M")-1,s=H.a.parseZone(e).format("YYYY").toString(),c=t.split(""),a=s.split(""),r=["\u17e0","\u17e1","\u17e2","\u17e3","\u17e4","\u17e5","\u17e6","\u17e7","\u17e8","\u17e9"],i=[],o=["\u1790\u17d2\u1784\u17c3\u1791\u17b8"],d=0;d<c.length;d++)t<10&&o.push(r[0]),o.push(r[c[d]]),d===c.length-1&&i.push(o.join(""));i.push("\u1781\u17c2"+["\u1798\u1780\u179a\u17b6","\u1780\u17bb\u1798\u17d2\u1797\u17c8","\u1798\u17b7\u1793\u17b6","\u1798\u17c1\u179f\u17b6","\u17a7\u179f\u1797\u17b6","\u1798\u17b7\u1790\u17bb\u1793\u17b6","\u1780\u1780\u17d2\u1780\u178a\u17b6","\u179f\u17b8\u17a0\u17b6","\u1780\u1789\u17d2\u1789\u17b6","\u178f\u17bb\u179b\u17b6","\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6","\u1792\u17d2\u1793\u17bc\u179a"][n]);for(var l=["\u1786\u17d2\u1793\u17b6\u17c6"],j=0;j<a.length;j++)l.push(r[a[j]]),j===a.length-1&&i.push(l.join(""));return i.join(" ")}var q,D=function(e){return function(e){for(var t,n=null===e||void 0===e||null===(t=e.toString())||void 0===t?void 0:t.split(""),s=["\u17e0","\u17e1","\u17e2","\u17e3","\u17e4","\u17e5","\u17e6","\u17e7","\u17e8","\u17e9"],c=[],a=0;a<(null===n||void 0===n?void 0:n.length);a++)isNaN(n[a])?c.push(n[a]):c.push(s[n[a]]);return null===c||void 0===c?void 0:c.join("")}(H.a.parseZone(e).format("HH:mm").toString()+" \u1793\u17b6\u1791\u17b8")},A=n(171),M=n(170),P=n.p+"static/media/success-sound.588291df.mp3",B=n(128);function k(e){var t=e.isMoble,n=e.shopData,s=new Date,c=Object(r.useState)(new Audio(P)),a=(Object(b.a)(c,1)[0],Object(B.a)(P,{volume:.5})),i=Object(b.a)(a,1)[0];return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(O.a,{children:Object(C.jsx)(x.a,{xs:24,md:24,children:Object(C.jsxs)(p.a,{style:{margin:"0 auto",width:t?"100%":"50%",color:"#014283",textAlign:"center"},children:[Object(C.jsx)("h2",{className:"HeaderFont",children:"\u179f\u17bc\u1798\u179f\u17d2\u179c\u17b6\u1782\u1798\u1793\u17cd\u1798\u1780\u1780\u17b6\u1793\u17cb"}),Object(C.jsxs)("h2",{className:"HeaderFont",children:[Object(C.jsx)(M.a,{style:{fontSize:30}})," ",null===n||void 0===n?void 0:n.name]}),Object(C.jsxs)("p",{children:["\u17a2\u17d2\u1793\u1780\u1798\u1780\u178a\u179b\u17cb\u1791\u17b8\u1793\u17c1\u17c7\u1793\u17c5",T(s)," \u179c\u17c1\u179b\u17b6\u1798\u17c9\u17c4\u1784 ",D(s)]}),Object(C.jsx)("div",{style:{width:250,height:250,textAlign:"center",borderRadius:"50%",border:"35px solid #52c41a",margin:"0 auto",padding:0},children:Object(C.jsxs)("div",{style:{width:"100%",height:"100%",paddingTop:30,borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.19) 0px 10px 20px, rgba(0, 0, 0, 0.23) 0px 6px 6px"},children:[Object(C.jsx)("h2",{className:"HeaderFont",style:{color:"#9254de"},children:"\u179a\u17bd\u1785\u179a\u17b6\u179b\u17cb"}),Object(C.jsx)(A.a,{id:"success",onClick:function(){return i()},className:"scale-animate",style:{fontSize:80,color:"#52c41a"}})]})}),Object(C.jsx)("br",{}),Object(C.jsx)("p",{style:{fontSize:18},children:"\u179f\u17bc\u1798\u17a2\u179a\u1782\u17bb\u178e\u179f\u1798\u17d2\u179a\u17b6\u1794\u17cb\u1780\u17b6\u179a\u1785\u17bc\u179b\u179a\u17bd\u1798\u179a\u1794\u179f\u17cb\u17a2\u17d2\u1793\u1780!"})]})})})})}var L=Object(v.a)(q||(q=Object(f.a)(["\nquery getShopById($shopId:ID!){\n    getShopById(shopId:$shopId){\n        shopNumber\n        _id\n        name\n    }\n}\n"])));function J(){var e=Object(j.g)().id,t=Object(j.f)(),n=Object(B.a)(P),s=(Object(b.a)(n,1)[0],Object(r.useState)({})),c=Object(b.a)(s,2),a=c[0],i=c[1],o=Object(r.useState)(!1),l=Object(b.a)(o,2),f=l[0],v=l[1],E=Object(r.useState)(""),H=Object(b.a)(E,2),T=(H[0],H[1],h.a.useForm()),q=Object(b.a)(T,1)[0],D=Object(r.useState)("sendCode"),A=Object(b.a)(D,2),M=A[0],J=A[1],Q=Object(r.useState)({}),Y=Object(b.a)(Q,2),Z=Y[0],V=Y[1],W=function(){window.innerWidth<=960?v(!0):v(!1)};Object(r.useEffect)((function(){W()}),[]),window.addEventListener("resize",W);var _=Object(w.a)(L,{variables:{shopId:e},onCompleted:function(e){var t=e.getShopById;i(t)},onError:function(e){t.push("/")}}),G=_.data;_.loading;Object(r.useEffect)((function(){G&&i(null===G||void 0===G?void 0:G.getShopById)}),[G]),Object(r.useEffect)((function(){var t=JSON.parse(localStorage.getItem("personalInfo"));t&&se({variables:{shopId:e,personalInfoId:null===t||void 0===t?void 0:t.id}})}),[]);var K=Object(F.a)(y,{onCompleted:function(e){var t=e.sendingPhone;!0===t.success?(u.b.success("\u179b\u17c1\u1781\u1780\u17bc\u178a\u1794\u17b6\u1793\u1795\u17d2\u1789\u17be"),J("verifyCode")):u.b.error(t.message)},onError:function(e){u.b.error(e.message)}}),U=Object(b.a)(K,2),X=U[0],ee=U[1].loading,te=Object(F.a)(S,{onCompleted:function(e){!0===e.createTransaction.success?(u.b.success("\u1780\u17b6\u179a\u1785\u17bb\u17c7\u1788\u17d2\u1798\u17c4\u17c7\u1787\u17c4\u1782\u1787\u17d0\u1799"),J("successMessage")):(u.b.error("\u179f\u17bc\u1798\u1798\u17c1\u178f\u17d2\u178f\u17b6\u179f\u17d2\u1780\u17c2\u1793 QR Code \u1798\u17d2\u178f\u1784\u1791\u17c0\u178f!"),t.push("/"))},onError:function(e){u.b.error("\u179f\u17bc\u1798\u1798\u17c1\u178f\u17d2\u178f\u17b6\u179f\u17d2\u1780\u17c2\u1793 QR Code \u1798\u17d2\u178f\u1784\u1791\u17c0\u178f!"),t.push("/")}}),ne=Object(b.a)(te,2),se=ne[0],ce=(ne[1].loading,Object(F.a)(I,{onCompleted:function(t){var n=t.verifyCode;if(!0===n.success){var s={id:n.id,phonenumber:null===Z||void 0===Z?void 0:Z.tel};localStorage.setItem("personalInfo",JSON.stringify(s)),se({variables:{personalInfoId:n.id,shopId:e}})}else u.b.error(n.message)},onError:function(e){u.b.error(e.message)}})),ae=Object(b.a)(ce,2),re=ae[0],ie=ae[1].loading,oe=function(e){var t=e;return"0"===t.substring(0,1)||"+"===t.substring(0,1)?"855"+t.substring(1,t.length):"855"!==t.substring(0,3)?"855"+t.substring(0,t.length):t};if(void 0!==e){return Object(C.jsxs)("div",{style:{padding:"20px",height:"100%"},children:["sendCode"===M?Object(C.jsx)(O.a,{children:Object(C.jsx)(x.a,{xs:24,md:24,children:Object(C.jsx)(p.a,{style:{margin:"0 auto",width:f?"100%":"50%"},children:Object(C.jsx)(h.a,{form:q,name:"login",onFinish:function(e){isNaN(null===e||void 0===e?void 0:e.tel)?u.b.error("\u179f\u17bc\u1798\u1794\u1789\u17d2\u1785\u17bc\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791\u17a2\u17c4\u1799\u178f\u17d2\u179a\u17b9\u1798\u178f\u17d2\u179a\u17bc\u179c!"):(X({variables:{phonenumber:oe(null===e||void 0===e?void 0:e.tel)}}),V(Object(d.a)(Object(d.a)({},e),{},{tel:oe(null===e||void 0===e?void 0:e.tel)})))},onFinishFailed:function(e){console.log("Failed:",e)},style:{color:"#014283"},children:Object(C.jsxs)(O.a,{children:[Object(C.jsxs)(x.a,{xs:24,md:24,style:{textAlign:"center"},children:[Object(C.jsx)("h3",{className:"HeaderFont",children:"\u179f\u17bc\u1798\u1794\u1789\u17d2\u1785\u17bc\u179b\u1796\u17d0\u178f\u17cc\u1798\u17b6\u1793\u179a\u1794\u179f\u17cb\u17a2\u17d2\u1793\u1780"}),Object(C.jsx)("br",{})]}),Object(C.jsxs)(x.a,{xs:24,md:24,children:[Object(C.jsxs)("p",{style:{fontSize:18},children:[Object(C.jsx)($.a,{}),"\u2003\u1782\u17c4\u178f\u17d2\u178f\u1793\u17b6\u1798"]}),Object(C.jsx)(h.a.Item,{name:"lastName",rules:[{required:!0,message:"\u178f\u17d2\u179a\u17bc\u179c\u1794\u17c6\u1796\u17c1\u1789\u1794\u17d2\u179a\u17a2\u1794\u17cb\u1781\u17b6\u1784\u179b\u17be!"}],children:Object(C.jsx)(m.a,{placeholder:"\u1782\u17c4\u178f\u17d2\u178f\u1793\u17b6\u1798",size:"large",style:{borderRadius:10}})})]}),Object(C.jsxs)(x.a,{xs:24,md:24,children:[Object(C.jsxs)("p",{style:{fontSize:18},children:[Object(C.jsx)($.a,{}),"\u2003\u1793\u17b6\u1798"]}),Object(C.jsx)(h.a.Item,{name:"firstName",rules:[{required:!0,message:"\u178f\u17d2\u179a\u17bc\u179c\u1794\u17c6\u1796\u17c1\u1789\u1794\u17d2\u179a\u17a2\u1794\u17cb\u1781\u17b6\u1784\u179b\u17be!"}],children:Object(C.jsx)(m.a,{placeholder:"\u1793\u17b6\u1798",size:"large",style:{borderRadius:10}})})]}),Object(C.jsxs)(x.a,{xs:24,md:24,children:[Object(C.jsxs)("p",{style:{fontSize:18},children:[Object(C.jsx)(R.a,{}),"\u2003\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791"]}),Object(C.jsx)(h.a.Item,{name:"tel",rules:[{required:!0,message:"\u178f\u17d2\u179a\u17bc\u179c\u1794\u17c6\u1796\u17c1\u1789\u1794\u17d2\u179a\u17a2\u1794\u17cb\u1781\u17b6\u1784\u179b\u17be!"}],children:Object(C.jsx)(m.a,{placeholder:"\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791",onChange:function(e){return function(e){/^[+-]?\d*(?:[.,]\d*)?$/.test(e)?q.setFieldsValue({tel:e}):q.setFieldsValue({tel:""})}(e.target.value)},size:"large",style:{borderRadius:10}})})]}),Object(C.jsx)(x.a,{xs:24,md:24,children:Object(C.jsx)(h.a.Item,{children:Object(C.jsxs)(g.a,{htmlType:"submit",type:"primary",size:"large",style:{width:"100%",height:"100%",borderRadius:10},loading:ee,children:["\u1794\u1793\u17d2\u178f\u2003",Object(C.jsx)(N.a,{})]})})})]})})})})}):null,"verifyCode"===M?Object(C.jsx)(z,{verifyCode:re,personalInfo:Z,isMoble:f,loading:ie}):null,"successMessage"===M?Object(C.jsx)(k,{isMoble:f,shopData:a}):null]})}t.push("/")}var Q=n(297),Y=n(292),Z=n.p+"static/media/srLogo-nobg.3caecaed.png",V=Q.a.Header;function W(){return Object(C.jsx)(V,{className:"site-layout-background",style:{padding:0,background:"#014283",height:100},children:Object(C.jsxs)(O.a,{children:[Object(C.jsx)(x.a,{xs:7,sm:4,md:4,lg:2,style:{color:"white"},children:Object(C.jsx)(Y.a,{className:"img-logo",src:Z,preview:!1})}),Object(C.jsx)(x.a,{xs:14,style:{color:"white",fontSize:18,marginTop:15},children:" \u179a\u178a\u17d2\u178b\u1794\u17b6\u179b\u1781\u17c1\u178f\u17d2\u178f\u179f\u17c0\u1798\u179a\u17b6\u1794"})]})})}function _(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],c=function(){window.innerWidth<=960?s(!0):s(!1)};return Object(r.useEffect)((function(){c()}),[]),window.addEventListener("resize",c),Object(C.jsx)("div",{style:{padding:"20px"},children:Object(C.jsx)(O.a,{children:Object(C.jsx)(x.a,{xs:24,md:24,children:Object(C.jsxs)(p.a,{style:{margin:"0 auto",width:n?"100%":"50%",color:"#014283",textAlign:"center"},children:[Object(C.jsx)("h2",{className:"HeaderFont",children:"\u179f\u17bc\u1798\u179f\u17d2\u1780\u17c2\u1793 QR Code!"}),Object(C.jsx)("br",{}),Object(C.jsx)("p",{style:{fontSize:18},children:"\u179f\u17bc\u1798\u17a2\u179a\u1782\u17bb\u178e\u179f\u1798\u17d2\u179a\u17b6\u1794\u17cb\u1780\u17b6\u179a\u1785\u17bc\u179b\u179a\u17bd\u1798\u179a\u1794\u179f\u17cb\u17a2\u17d2\u1793\u1780"})]})})})})}Q.a.Footer,Q.a.Content;var G=n(290),K=n(295),U=n(289),X=(n(275),n(180)),ee=n.n(X);var te=function(){var e=new G.a({uri:"https://covid-19.srprovince.com/graphql",cache:new K.a});return Object(C.jsx)(U.a,{client:e,children:Object(C.jsx)(ee.a,Object(d.a)(Object(d.a)({},{title:"QR Code | Scan",description:"Siem Reap Province qr code scanner app",meta:{charset:"utf-8",name:{description:"Siem Reap Province qr code scanner app"}}}),{},{children:Object(C.jsx)(l.a,{children:Object(C.jsx)(Q.a,{style:{minHeight:"100vh"},children:Object(C.jsxs)(Q.a,{className:"site-layout",children:[Object(C.jsx)(W,{}),Object(C.jsxs)(j.c,{children:[Object(C.jsx)(j.a,{path:"/:id",children:Object(C.jsx)(J,{})}),Object(C.jsx)(j.a,{path:"/",component:function(){return Object(C.jsx)(_,{})}})]})]})})})}))})},ne=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,301)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};o.a.render(Object(C.jsx)(te,{}),document.getElementById("root")),ne()}},[[278,1,2]]]);
//# sourceMappingURL=main.755370b7.chunk.js.map